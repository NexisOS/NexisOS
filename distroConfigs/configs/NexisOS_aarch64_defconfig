# Architecture
BR2_aarch64=y

BR2_INIT_BUSYBOX=y
BR2_PACKAGE_BUSYBOX_WGET=y
BR2_SYSTEM_DHCP="eth0"

# Root FS formats
BR2_TARGET_ROOTFS_ISO9660=y
BR2_TARGET_ROOTFS_ISO9660_HYBRID=y
BR2_TARGET_ROOTFS_ISO9660_COMPRESSION_XZ=y
BR2_TARGET_ROOTFS_TAR=y
BR2_TARGET_ROOTFS_EXT2=y

# Shell and core utilities
BR2_PACKAGE_BUSYBOX=y

# Installer tools
BR2_PACKAGE_TAR=y
BR2_PACKAGE_UTIL_LINUX=y
BR2_PACKAGE_UTIL_LINUX_PARTED=y
BR2_PACKAGE_E2FSPROGS_MKFS=y
BR2_PACKAGE_XFSPROGS=y
BR2_PACKAGE_BTRFS_PROGS=y         # Added Btrfs utilities for installer support

# Networking + secure download (minimal TLS)
BR2_PACKAGE_IFUPDOWN_SCRIPTS=y
BR2_PACKAGE_DHCPCD=y
BR2_PACKAGE_MBEDTLS=y
BR2_PACKAGE_CA_CERTIFICATES=y

# GRUB (UEFI only for aarch64)
BR2_PACKAGE_GRUB2=y
BR2_PACKAGE_GRUB2_TARGET_AARCH64_EFI=y
BR2_PACKAGE_EFIBOOTMGR=y

# Overlay (installer scripts, etc.)
BR2_ROOTFS_OVERLAY="board/nexisos/overlay"

# Kernel
BR2_LINUX_KERNEL=y
BR2_LINUX_KERNEL_CUSTOM_VERSION=y
BR2_LINUX_KERNEL_CUSTOM_VERSION_VALUE="6.6.30"
BR2_LINUX_KERNEL_USE_CUSTOM_CONFIG=y
BR2_LINUX_KERNEL_CUSTOM_CONFIG_FILE="board/nexisos/linux-aarch64.config"
BR2_LINUX_KERNEL_INSTALL_TARGET=y

# Toolchain (optimized for size)
BR2_TOOLCHAIN_BUILDROOT_MUSL=y

# Size optimization
BR2_STRIP_strip=y
BR2_STRIP_EXCLUDE_FILES=""
BR2_ENABLE_LOCALE_PURGE=y
BR2_GENERATE_LOCALE="C en_US.UTF-8"
